# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# Filename: target/early/pkg_udev.patch
# Copyright (C) 2007 The OpenSDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- SDE-COPYRIGHT-NOTE-END ---

--- ./etc/udev/rules.d/80-drivers.rules.orig	2007-10-11 18:31:13.000000000 -0400
+++ ./etc/udev/rules.d/80-drivers.rules	2007-10-11 18:38:29.000000000 -0400
@@ -5 +5 @@
-DRIVER!="?*", ENV{MODALIAS}=="?*", RUN{ignore_error}+="/sbin/modprobe $env{MODALIAS}"
+DRIVER!="?*", ENV{MODALIAS}=="?*", RUN{ignore_error}+="/sbin/hotplug2-modwrap $env{MODALIAS}"
@@ -7,2 +7,2 @@
-  RUN{ignore_error}+="/bin/sh -c '/sbin/modprobe -a $$(while read id; do echo pnp:d$$id; done < /sys$devpath/id)'"
-SUBSYSTEM=="tifm", RUN+="/sbin/modprobe --all tifm_sd tifm_ms"
+  RUN{ignore_error}+="/bin/sh -c 'while read id; do /sbin/hotplug2-modwrap pnp:d$$id; done < /sys$devpath/id'"
+SUBSYSTEM=="tifm", RUN+="/bin/sh -c 'for x in tifm_sd tifm_ms; do /sbin/modprobe $$x; done'"
