#!patch
# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: target/share/livecd/rootfs/opt/kde3/bin/startkde
# Copyright (C) 2006 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

Set the X keyboard layout according to the selected language as soon as possible.

  - Rene Rebe <rene@exactcode.de>

--- startkde.vanilla	2005-10-05 15:41:59.000000000 +0200
+++ startkde	2005-05-16 18:01:36.000000000 +0200
@@ -188,10 +188,13 @@
     kpersonalizer --before-session
     # handle kpersonalizer restarts (language change)
     while test $? -eq 1; do
+        setxkbmap `kreadconfig --file kdeglobals --group Locale --key Language`
         kpersonalizer --r --before-session
     done
     dcopquit kwin
     dcopserver_shutdown --wait
+else
+    setxkbmap `kreadconfig --file kdeglobals --group Locale --key Language`
 fi
 
 # the splashscreen and progress indicator
