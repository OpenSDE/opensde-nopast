# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: lib/sde-binary/preconfig.in
# Copyright (C) 2007 - 2012 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

if [ ! -f $cfgtmpdir/cache_pkgfile_type.in ]; then
	cat <<EOT > $cfgtmpdir/cache_pkgfile_type.in
	comment ' '
	comment '- Binary package format'
	block_begin 3
		choice SDECFG_PKGFILE_TYPE tar.bz2 \\
EOT
	# generate choices
	for x in tar.{bz2,gz,lzma,lzo,xz} \
		$( ls -1 lib/sde-binary/package-*.sh 2> /dev/null |
			sed -e 's,.*/package-\(.*\).sh,\1,' ); do
		$ECHO_E "\t\t${x} 'Create ${x} binary packages' \\" >> $cfgtmpdir/cache_pkgfile_type.in
	done

	cat <<EOT >> $cfgtmpdir/cache_pkgfile_type.in
		none	'Create no binary packages'
		bool 'Append version number to package files' SDECFG_PKGFILE_VER 1
		bool 'Do not package development files' SDECFG_PKGFILE_NODEVEL 0
	block_end
EOT
fi
